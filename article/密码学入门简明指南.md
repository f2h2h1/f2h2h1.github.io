密码学入门简明指南
================================

- 这篇文章不涉及密码学的数学原理，只提及相关概念和应用

- 信息安全的五个基本要素，即需保证信息的保密性、真实性、完整性、不可否认性、可用性。

- 古典密码 基于字符的替换或移项。

- 现在密码 使用计算机技术的，在比特和字节上操作。

- 明文 = 在密码学中是指传送方想要接收方获得的可读信息

- 密文 = 经过加密的明文

- 加密 = 把明文转换为密文的过程

- 解密 = 把密文转换为明文的过程

- 密钥 = 指某个用来完成加密、解密、完整性验证等密码学应用的秘密信息

- 密码 约等于 密钥

- 数字摘要 = 一段信息的哈希值，一般情况下是指明文的哈希值

- MD = 消息摘要 (Message Digest) ，就是数字摘要

- MAC = 消息验证码 (Message Authentication Code) ，就是明文加上密钥的数字摘要，这里的密钥一般是对称加密的密钥

- Nonce 是 Number used once 或 Number once 的缩写，数字使用一次，在密码学中 Nonce 是一个只被使用一次的任意或非重复的随机数值

- 时间戳 timestamp 表示的是从世界标准时间（UTC，Coordinated Universal Time）的 1970 年 1 月 1 日 0 时 0 分 0 秒开始到现在的秒数，时间戳大部分情况下是 10 位的，但有时也会用 13 位的时间戳

- 块加密 又称为 分块加密 或 分组加密 ，是将明文分成多个等长的模块（block），使用确定的算法和对称密钥对每组分别加密解密。DES 和 AES 都是块加密

- 流加密 加密和解密双方使用相同伪随机加密数据流（pseudo-randomstream）作为密钥，明文数据每次与密钥数据流顺次对应加密，得到密文数据流。实践中数据通常是一个位（bit）并用异或（xor）操作加密。RSA 是流加密

- 对称加密 = 加密和解密都用同一个密钥。对称加密通常有三个参数，算法 密码强度 模式，例如 aes-256-gcm ， aes 是对称加密的算法， 256 是密码强度， gcm 是分组密码的工作模式，通常只有块加密的算法有工作模式的参数。

- 非对称加密 = 加密和解密使用不同的密钥。一般是一对密钥，加密用其中一个密钥，那么解密就要用另一个密钥。一般两个密钥的长度是不一样的，一般长度较短的密钥会公开，称为公钥，长度较长的密钥不会公开，称为私钥

- 公钥 = 在非对称加密中，可以公开的密钥

- 私钥 = 在非对称加密中，不能公开的密钥

- 数字签名 = 使用密钥加密后的数字摘要，这里的密钥一般是非对称加密中的私钥

- 密钥密文 一般是指，对称加密和非对称加密组合使用下，使用公钥 加密 对称加密的密钥

- 数字信封 一般是指，对称加密和非对称加密组合使用下，内容是 密钥密文 + 密文 （使用对称加密的密文）。数字信封既发挥了对称加密算法速度快的优点，又发挥了非对称加密算法密钥管理方便的优点。

- 数字证书 = 用户信息（csr） + 用户公钥 + 公钥指纹 + 其它相关信息 + 私钥 加密 前面提及的 相关数据的 数字摘要 所得到的数字签名（一般是 CA 的私钥）
    这是数字证书的一般格式
    ```
    证书
        版本号
        序列号
        签名算法
        颁发者
        证书有效期
            此日期前无效
            此日期后无效
        主题
        主题公钥信息
            公钥算法
            主题公钥
        颁发者唯一身份信息（可选项）
        主题唯一身份信息（可选项）
        扩展信息（可选项）
            ...
    证书签名算法
    数字签名
    ```

- 公钥指纹 = 公钥的数字摘要，是用于标识较长公共密钥字节的短序列。由于指纹较比生成它们的密钥短得多，因此可以用来简化某些密钥的管理任务。

- 颁发证书 = CA 用私钥加密 CSR 和 用户公钥然后生成数字证书的过程

- csr 是 cerificate signing request 的英文缩写，即证书请求文件，内容是 公钥 + 用户信息（例如 域名之类的），一般是向 CA 申请数字证书用的。
    cerificate 证书
    signing 签署
    request 请求

- CA = 数字证书认证 (Certificate Authority)

- CA 中心 = 数字证书认证机构，一般情况下 CA 和 CA 中心 都是指 数字证书认证机构

- CA 系统 = 用于颁发数字证书的系统，由 CA 中心管理和运营

- crt 和 cert 都是 certificate 的缩写

- 最终实体证书 = 普通用户向 CA 申请后使用的证书

- 自签证书 = 用户信息（csr） + 用户公钥 + 私钥加密前面两个数据所得到的数字签名（用户私钥）

- 证书链是从终端用户证书后跟着一系列的 CA 证书，而通常最后一个是自签名证书，并且有如下关系：
    1. 在证书链上除最后一个证书外，证书颁发者等于其后一个证书的主题。
    1. 除了最后一个证书，每个证书都是由其后的一个证书签名的。
    1. 最后的证书是信任主题，由于是通过可信过程得到的，你可以信任它。

- 根证书 = 证书链里最后一个证书，一般是自签证书，一般是 CA 的自签证书，根证书一般是直接内置在客户端（内置在浏览器或操作系统里）的

- 中间证书 = 一个 CA 向另一个 CA 颁发的证书，又或者说证书链中处于中间位置的证书，一个证书链里可以有多个中间证书

- 线证书状态协议（英语：Online Certificate Status Protocol，缩写：OCSP）是一个用于获取X.509数字证书撤销状态的网际协议，[1]在RFC 6960中定义，作为证书吊销列表（CRL）的替代品解

- 证书吊销列表（英文：Certificate revocation list，缩写：CRL，或译作证书废止清册）是尚未到期就被证书颁发机构吊销的数字证书的名单。这些在证书吊销列表中的证书不再会受到信任。目前，在线证书状态协议（OCSP）已经替代证书吊销列表（CRL）成为检查证书状态的主流。

- PKI = 公开密钥基础设施 (Public Key Infrastructure) ， PKI 包含 PKIX 和 PKCS
    - PKI 的核心是数字证书的发行，一般来说，构成 PKI 的主要要素就是下面三个概念
        - 数字证书
        - 认证机关 (CA)
        - 证书库

- PKCS = 公钥密码学标准 (The Public-Key Cryptography Standards)
    - 是由美国 RSA 数据安全公司及其合作伙伴制定的一组公钥密码学标准，其中包括证书申请、证书更新、证书作废表发布、扩展证书内容以及数字签名、数字信封的格式等方面的一系列相关协议。

- X.509 = PKIX

- PKIX = 公钥基础设施 X.509 (Public Key Infrastructure X.509) ，X.509 是密码学里公钥证书的格式标准，证书组成结构标准用 ASN.1 来进行描述

- X.509 是密码学里公钥证书的格式标准， PKCS 是一系列密码学的标准， PKCS 有十几个标准， X.509 大致相当于 PKCS6 和 PKCS12

- ASN.1 抽象语法符号 （Abstract Syntax Notation One，ASN.1）
    - ASN.1 是一种用来定义数据结构的接口描述语言
    - ASN.1 有一套关联的编码规则，这些编码规则用来规定如何用二进制来表示数据结构， DER 是其中一种

- DER = 可辨别编码规则 (Distinguished Encoding Rules) ，是一种二进制的用于保存证书和密钥的文件编码格式， windows 和 java 是用这种格式的

- PEM = 私密 增强 邮件 (Privacy Enhanced Mail) ，是一种纯文本的用于保存证书和密钥的文件编码格式，而 DER 编码的内容是二进制的，不适合与邮件传输（早期 email 不能发送附件）， nginx apahce php 是用这种格式的

- PKIX 和 X.509 是格式标准，而 DER 和 PEM 是文件编码格式

- 一般语境下的 SSL 证书，就是 Common Name 是域名的数字证书

- 常用的算法
    - 对称加密
        - des
        - 3des
        - aes
    - 非对称加密
        - rsa
    - 数字摘要
        - sha2
        - md5

- 密码套件 或者称为密码包，是 https 中各种算法的集合，一般包括 密钥交换算法 身份验证算法 加密算法（加密方法-加密强度-模式） 哈希算法

- pr = 伪随机数 (Pseudo Random) ，计算机里生成真正的随机数其实挺麻烦的，所以一般都是用伪随机数

- prf = 伪随机数函数 (Pseudo Random Function) ，就是用于生成伪随机数的方法

- PRNG = 伪随机数生成器 (Pseudo Random Number Generator) ，就是用于生成伪随机数的方法

- TTP 可信赖的第三者 (Trusted third party) ，在 PKI 里通常是指 CA

- OTP 一次性密码本 (one-time pad)

- 零知识证明（Zero Knowledge Proof），是这样的一个过程，证明者在不向验证者提供任何额外信息的前提下，使验证者相信某个论断（Statement）是正确的。证明过程包括交互式（Interactive）和非交互式（Non-interactive）两种。

- 各类编码的转换，例如 base64 和 urlencode ，这类编码的转换虽然可以把一般的字符串转换成一堆看上去是乱码的字符串，但实质上并没有加密的功能，只是增加了普通人的阅读障碍。有些时候也可以用这类方式来规避一些内容的审查

- https 的连接过程

- openssl 的一般使用
