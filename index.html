<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>(*>_<*)</title>
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
	<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
	<style>
		.main {
			margin-top: 50px;
			padding-top: 10px;
		}
		hr {
			margin-top: 10px;
			margin-bottom: 10px;
			border: 1px inset;
		}
		#content blockquote {
			border-left: 5px solid #6e6666;
		}
	</style>
</head>
<body>
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand" href="index.html">主页</a>
			</div>
		</div>
	</nav>

	<div class="main">
		<div class="container" id="content">

		</div>
	</div>

	<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
	<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<!-- 渲染md -->
	<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
	<!-- 代码高亮 -->
	<link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/solarized_dark.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
	<script>
		$(function() {
			function getKey(key) {
				var url = location.search.replace(/^\?/, '').split('&');
				var paramsObj = {};
				for (var i = 0, iLen = url.length; i < iLen; i++) {
					var param = url[i].split('=');
					paramsObj[param[0]] = param[1];
				};
				if (key) {
					return paramsObj[key] || '';
				};
				return paramsObj;
			};
			let title = getKey("title");
			if (title === '') {
				$.ajax({
				type: "GET",
				url: "articleList.json",
				dataType: "json",
				success: function(result) {
						let articleList = result;
						let content = document.getElementById('content');
						for (let i = articleList.length - 1, len = 0; i >= len; i--) {
							let div = document.createElement("div");
							let a = document.createElement("a");
							let h1 = document.createElement("h1");
							let h6 = document.createElement("h6");
							let hr = document.createElement("hr");
							let articleTitle = articleList[i].title;

							h1.innerHTML = articleTitle;
							a.appendChild(h1);
							a.href = "index.html?title=" + articleTitle;

							h6.innerHTML = articleList[i].date;
							div.appendChild(a);
							div.appendChild(h6);
							div.appendChild(hr);
							content.appendChild(div);
						}
					}
				});
			} else {
				hljs.initHighlightingOnLoad();
				$.ajax({
				type: "GET",
				url: "article/" + title + ".md",
				dataType: "text",
				success: function(result) {
						marked.setOptions({
							renderer: new marked.Renderer(),
							highlight: function (code, lang) {
								return hljs.highlightAuto(code).value;
							}
						});
						document.getElementById('content').innerHTML = marked(result);
						let codeBlockList = document.getElementsByTagName('code');
						for (let i = 0, len = codeBlockList.length; i < len; i++) {
							codeBlockList[i].className = codeBlockList[i].className + ' ' + 'hljs';
						}
					}
				});
			}
		});
	</script>
	<script>
		var _mtac = {};
		(function() {
			var mta = document.createElement("script");
			mta.src = "//pingjs.qq.com/h5/stats.js?v2.0.4";
			mta.setAttribute("name", "MTAH5");
			mta.setAttribute("sid", "500669777");
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(mta, s);
		})();
	</script>
</body>
</html>
