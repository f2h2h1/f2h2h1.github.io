<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>(*>_>*)</title>
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
	<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
	<style>
		hr {
			margin-top: 10px;
			margin-bottom: 10px;
			border: 1px inset;
		}

		#content blockquote {
			border-left: 5px solid #6e6666;
		}

		.footer {
			margin-top: 50px;
			width: 100%;
			height: 60px;
		}
	</style>
</head>

<body>
	<nav class="navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand" href="#">主页</a>
			</div>
		</div>
	</nav>
	<article class="container" id="content">

	</article>
	<footer class="footer">
		<div class="container">
			<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
				<img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
			</a>
			<br>
			本作品采用
			<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">知识共享署名 4.0 国际许可协议</a>
			进行许可。
		</div>
	</footer>

	<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
	<!-- 渲染md -->
	<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
	<!-- 代码高亮 -->
	<link rel="stylesheet" href="static/solarized_dark.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
	<script>
		$(function () {
			function getKey(key) {
				var url = location.hash.replace(/^\#/, '').split('&');
				var paramsObj = {};
				for (var i = 0, iLen = url.length; i < iLen; i++) {
					var param = url[i].split('=');
					paramsObj[param[0]] = param[1];
				};
				if (key) {
					return paramsObj[key] || '';
				};
				return paramsObj;
			};
			var content = document.getElementById('content');
			var articleList = {};

			function showArticleList() {
				content.innerHTML = '';
				for (let i = articleList.length - 1, len = 0; i >= len; i--) {
					let div = document.createElement("div");
					let a = document.createElement("a");
					let h1 = document.createElement("h1");
					let h6 = document.createElement("h6");
					let hr = document.createElement("hr");
					let articleTitle = articleList[i].title;

					h1.innerHTML = articleTitle;
					a.appendChild(h1);
					a.href = "#title=" + articleTitle;

					h6.innerHTML = articleList[i].createTime;
					div.appendChild(a);
					div.appendChild(h6);
					div.appendChild(hr);
					content.appendChild(div);
				}
			}

			function findArticleInfo(title) {
				for (let i = articleList.length - 1, len = 0; i >= len; i--) {
					if (articleList[i].title === title) {
						return articleList[i];
					}
				}

				return null;
			}

			function hashChangeFire() {
				let title = getKey("title");
				if (title === '') {
					if (Object.getOwnPropertyNames(articleList).length === 0) {
						$.ajax({
							type: "GET",
							url: "articleList.json",
							dataType: "json",
							success: function (result) {
								articleList = result;
								showArticleList();
							}
						});
					} else {
						showArticleList();
					}
				} else {
					hljs.initHighlightingOnLoad();
					$.ajax({
						type: "GET",
						url: "article/" + title + ".md",
						dataType: "text",
						success: function (result) {
							marked.setOptions({
								renderer: new marked.Renderer(),
								highlight: function (code, lang) {
									return hljs.highlightAuto(code).value;
								}
							});
							content.innerHTML = marked(result);

							let codeBlockList = document.getElementsByTagName('code');
							for (let i = 0, len = codeBlockList.length; i < len; i++) {
								codeBlockList[i].className = codeBlockList[i].className + ' ' + 'hljs';
							}
							let tableList = document.getElementsByTagName('table');
							for (let i = 0, len = tableList.length; i < len; i++) {
								tableList[i].className = 'table';
							}

							articleInfo = findArticleInfo(title);
							let span = document.createElement("span");
							let hr = document.createElement("hr");
							span.innerHTML = "create time: " + articleInfo.createTime;
							content.appendChild(hr);
							content.appendChild(span);
						},
						error: function () {
							content.innerHTML = '<div class="jumbotron"><div class="container"><h1>404</h1><p><a href="javascript:history.back()">go back</a></p></div></div>';
						}
					});
				}
			}
			hashChangeFire();
			window.onhashchange = hashChangeFire;
		});
	</script>
	<script>
		var _mtac = {};
		(function () {
			var mta = document.createElement("script");
			mta.src = "//pingjs.qq.com/h5/stats.js?v2.0.4";
			mta.setAttribute("name", "MTAH5");
			mta.setAttribute("sid", "500669777");
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(mta, s);
		})();
	</script>
</body>

</html>